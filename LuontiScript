DROP DATABASE IF EXISTS dad;
CREATE DATABASE dad;
USE dad;

CREATE TABLE ItemType
(
  ITID VARCHAR(30) NOT NULL,
  Attack VARCHAR(100) NOT NULL,
  Defense VARCHAR(100) NOT NULL,
  Money VARCHAR(10000) NOT NULL,
  Name VARCHAR(50) NOT NULL,
  Intellect VARCHAR(100) NOT NULL,
  HP VARCHAR(500) NOT NULL,
  Special VARCHAR(10) NOT NULL,
  PRIMARY KEY (ITID)
);

CREATE TABLE EnemyType
(
  Name VARCHAR(50) NOT NULL,
  ETID VARCHAR(20) NOT NULL,
  Attack VARCHAR(100) NOT NULL,
  Defense VARCHAR(100) NOT NULL,
  HP VARCHAR(1000) NOT NULL,
  Intellect VARCHAR(1000) NOT NULL,
  PRIMARY KEY (ETID)
);

CREATE TABLE Magic
(
  MagicID VARCHAR(20) NOT NULL,
  Name VARCHAR(50) NOT NULL,
  Effect VARCHAR(500) NOT NULL,
  PRIMARY KEY (MagicID)
);

CREATE TABLE EnvT
(
  EnvTID VARCHAR(40) NOT NULL,
  Name VARCHAR(50) NOT NULL,
  Attribute VARCHAR(30) NOT NULL,
  PRIMARY KEY (EnvTID)
);

CREATE TABLE EnemyMagic
(
  MagicID VARCHAR(20) NOT NULL,
  ETID VARCHAR(20) NOT NULL,
  FOREIGN KEY (MagicID) REFERENCES Magic(MagicID),
  FOREIGN KEY (ETID) REFERENCES EnemyType(ETID)
);

CREATE TABLE NPCType
(
  Name VARCHAR(50) NOT NULL,
  NPCTID VARCHAR(20) NOT NULL,
  Attack VARCHAR(100) NOT NULL,
  Intellect VARCHAR(100) NOT NULL,
  Defense VARCHAR(100) NOT NULL,
  HP VARCHAR(200) NOT NULL,
  PRIMARY KEY (NPCTID)
);

CREATE TABLE Environment
(
  XCo VARCHAR(100) NOT NULL,
  YCo VARCHAR(100) NOT NULL,
  EnvTID VARCHAR(40) NOT NULL,
  PRIMARY KEY (XCo, YCo),
  FOREIGN KEY (EnvTID) REFERENCES EnvT(EnvTID)
);

CREATE TABLE NPC
(
  SHP VARCHAR(150) NOT NULL,
  NPCID VARCHAR(20) NOT NULL,
  NPCTID VARCHAR(20) NOT NULL,
  XCo VARCHAR(100) NOT NULL,
  YCo VARCHAR(100) NOT NULL,
  PRIMARY KEY (NPCID),
  FOREIGN KEY (NPCTID) REFERENCES NPCType(NPCTID),
  FOREIGN KEY (XCo, YCo) REFERENCES Environment(XCo, YCo)
);

CREATE TABLE Player
(
  Name VARCHAR(40) NOT NULL,
  PID VARCHAR(5) NOT NULL,
  Money VARCHAR(10000) NOT NULL,
  XCo VARCHAR(100) NOT NULL,
  YCo VARCHAR(100) NOT NULL,
  PRIMARY KEY (PID),
  FOREIGN KEY (XCo, YCo) REFERENCES Environment(XCo, YCo)
);

CREATE TABLE Stats
(
  SID VARCHAR(10) NOT NULL,
  HP VARCHAR(200) NOT NULL,
  Attack VARCHAR(100) NOT NULL,
  Charisma VARCHAR(100) NOT NULL,
  Intellect VARCHAR(100) NOT NULL,
  PID VARCHAR(5) NOT NULL,
  PRIMARY KEY (SID),
  FOREIGN KEY (PID) REFERENCES Player(PID)
);

CREATE TABLE Item
(
  IID VARCHAR(30) NOT NULL,
  ITID VARCHAR(30) NOT NULL,
  PID VARCHAR(10) NOT NULL,
  XCo VARCHAR(100) NOT NULL,
  YCo VARCHAR(100) NOT NULL,
  NPCID VARCHAR(20) NOT NULL,
  FOREIGN KEY (ITID) REFERENCES ItemType(ITID),
  FOREIGN KEY (PID) REFERENCES Player(PID),
  FOREIGN KEY (XCo, YCo) REFERENCES Environment(XCo, YCo),
  FOREIGN KEY (NPCID) REFERENCES NPC(NPCID)
);

CREATE TABLE Enemy
(
  EID VARCHAR(20) NOT NULL,
  SHP VARCHAR(100) NOT NULL,
  ETID VARCHAR(20) NOT NULL,
  XCo VARCHAR(100) NOT NULL,
  YCo VARCHAR(100) NOT NULL,
  PRIMARY KEY (EID),
  FOREIGN KEY (ETID) REFERENCES EnemyType(ETID),
  FOREIGN KEY (XCo, YCo) REFERENCES Environment(XCo, YCo)
);

CREATE TABLE PlayerMagic
(
  MagicID VARCHAR(20) NOT NULL,
  PID VARCHAR(5) NOT NULL,
  FOREIGN KEY (MagicID) REFERENCES Magic(MagicID),
  FOREIGN KEY (PID) REFERENCES Player(PID)
);
